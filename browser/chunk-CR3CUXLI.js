import{a as q}from"./chunk-NK5VJMDK.js";import{a as z,c as L,d as V,e as T,g as Y,h as W,s as D,u as j}from"./chunk-IGKX3LPO.js";import{g as E}from"./chunk-BTAZEGTB.js";import"./chunk-RTPLDOJU.js";import{Aa as x,Ga as w,La as M,Rb as N,Sb as k,Tb as I,Wa as h,Wb as F,Xa as r,Ya as a,Za as P,a as b,aa as g,ab as u,ba as l,bb as _,cb as m,gb as v,jb as s,kb as y,lb as p,mb as S,nb as C,ob as f,pb as O,va as c}from"./chunk-W5R6ALBK.js";function B(d,o){if(d&1&&(r(0,"div",11),s(1),a()),d&2){let n=m();c(),y(n.message)}}function G(d,o){if(d&1){let n=u();r(0,"div",12)(1,"form",13,0),_("ngSubmit",function(){g(n);let t=m();return l(t.saveMerchant())}),r(3,"div",14)(4,"input",15),O("ngModelChange",function(t){g(n);let i=m();return f(i.newMerchant.firstName,t)||(i.newMerchant.firstName=t),l(t)}),a()(),r(5,"div",14)(6,"input",16),O("ngModelChange",function(t){g(n);let i=m();return f(i.newMerchant.lastName,t)||(i.newMerchant.lastName=t),l(t)}),a()(),r(7,"div",14)(8,"input",17),O("ngModelChange",function(t){g(n);let i=m();return f(i.newMerchant.dni,t)||(i.newMerchant.dni=t),l(t)}),a()(),r(9,"div",14)(10,"input",18),O("ngModelChange",function(t){g(n);let i=m();return f(i.newMerchant.phone,t)||(i.newMerchant.phone=t),l(t)}),a()(),r(11,"button",19),s(12),a()()()}if(d&2){let n=v(2),e=m();c(4),C("ngModel",e.newMerchant.firstName),c(2),C("ngModel",e.newMerchant.lastName),c(2),C("ngModel",e.newMerchant.dni),c(2),C("ngModel",e.newMerchant.phone),c(),h("disabled",n.invalid),c(),p(" ",e.editingMerchantId?"Actualizar":"Guardar"," ")}}function U(d,o){if(d&1){let n=u();r(0,"div",20)(1,"div",21)(2,"div",22),P(3,"i",23),a(),r(4,"div",24)(5,"strong"),s(6),a(),r(7,"p"),s(8),a(),r(9,"p")(10,"span",25),P(11,"i",26),s(12),a()()()(),r(13,"div",27)(14,"button",28),_("click",function(){let t=g(n).$implicit,i=m();return l(i.editMerchant(t))}),s(15,"Editar"),a(),r(16,"button",29),_("click",function(){let t=g(n).$implicit,i=m();return l(i.deleteMerchant(t.id))}),s(17,"Eliminar"),a()()()}if(d&2){let n=o.$implicit;c(6),S("",n.firstName," ",n.lastName),c(2),p("DNI: ",n.dni),c(2),h("ngClass",n.phone?"phone-active":"phone-inactive"),c(2),p(" ",n.phone||"Sin tel\xE9fono"," ")}}function R(d,o){d&1&&(r(0,"div",30),s(1," No hay comerciantes registrados. "),a())}var A=class d{constructor(o){this.merchantService=o}merchants=[];showForm=!1;loading=!1;message="";newMerchant={firstName:"",lastName:"",dni:"",phone:""};editingMerchantId=null;ngOnInit(){this.loadMerchants()}toggleForm(){this.showForm=!this.showForm,!this.editingMerchantId&&this.showForm&&this.resetFormFields()}loadMerchants(){this.loading=!0,this.merchantService.getMerchants().subscribe({next:o=>{this.merchants=o,this.loading=!1},error:()=>{this.message="Error al cargar comerciantes.",this.loading=!1}})}saveMerchant(){if(!this.newMerchant.firstName||!this.newMerchant.lastName||!this.newMerchant.dni){this.message="Nombre, Apellido y DNI son obligatorios.";return}this.editingMerchantId?this.updateMerchant():this.merchantService.addMerchant(this.newMerchant).subscribe({next:()=>{this.message="Comerciante agregado correctamente.",this.resetFormFields(),this.loadMerchants()},error:o=>{this.message=o.error?.message||"Error al agregar comerciante."}})}editMerchant(o){this.editingMerchantId=o.id,this.newMerchant=b({},o),this.showForm=!0}updateMerchant(){this.merchantService.updateMerchant(this.editingMerchantId,this.newMerchant).subscribe({next:()=>{this.message="Comerciante actualizado correctamente.",this.resetFormFields(),this.loadMerchants()},error:o=>{this.message=o.error?.message||"Error al actualizar comerciante."}})}deleteMerchant(o){confirm("\xBFSeguro que deseas eliminar este comerciante?")&&this.merchantService.deleteMerchant(o).subscribe({next:()=>{this.message="Comerciante eliminado correctamente.",this.loadMerchants()},error:n=>{this.message=n.error?.message||"Error al eliminar comerciante."}})}resetFormFields(){this.newMerchant={firstName:"",lastName:"",dni:"",phone:""},this.editingMerchantId=null}static \u0275fac=function(n){return new(n||d)(x(q))};static \u0275cmp=w({type:d,selectors:[["app-merchant-list"]],decls:15,vars:5,consts:[["merchantForm","ngForm"],[1,"container","mt-5"],[1,"card","shadow-sm","p-4"],[1,"text-muted"],["class","alert alert-info text-center",4,"ngIf"],[1,"text-end","mb-3"],[1,"btn","btn-success","btn-lg",3,"click"],["class","mb-4",4,"ngIf"],[1,"merchant-cards"],["class","merchant-card shadow-sm",4,"ngFor","ngForOf"],["class","text-center text-muted mt-3",4,"ngIf"],[1,"alert","alert-info","text-center"],[1,"mb-4"],[1,"form-add-merchant",3,"ngSubmit"],[1,"form-group","mb-2"],["type","text","placeholder","Nombre","name","firstName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Apellido","name","lastName","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","DNI","name","dni","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","placeholder","Tel\xE9fono","name","phone",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100","mt-2",3,"disabled"],[1,"merchant-card","shadow-sm"],[1,"merchant-info"],[1,"user-icon"],[1,"bi","bi-person-circle"],[1,"text-info"],[3,"ngClass"],[1,"bi","bi-telephone-fill"],[1,"merchant-actions"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"text-center","text-muted","mt-3"]],template:function(n,e){n&1&&(r(0,"div",1)(1,"div",2)(2,"h2"),s(3,"Lista de Comerciantes"),a(),r(4,"p",3),s(5,"Gesti\xF3n de comerciantes del sistema"),a(),M(6,B,2,1,"div",4),r(7,"div",5)(8,"button",6),_("click",function(){return e.toggleForm()}),s(9),a()(),M(10,G,13,6,"div",7),P(11,"hr"),r(12,"div",8),M(13,U,18,5,"div",9),a(),M(14,R,2,0,"div",10),a()()),n&2&&(c(6),h("ngIf",e.message),c(3),p(" ",e.showForm?"Cancelar":"Agregar Comerciante"," "),c(),h("ngIf",e.showForm),c(3),h("ngForOf",e.merchants),c(),h("ngIf",e.merchants.length===0&&!e.loading))},dependencies:[F,N,k,I,j,W,z,L,V,D,Y,T,E],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{max-width:1200px;margin:auto;padding:0 20px;animation:_ngcontent-%COMP%_fadeInUp .8s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.card[_ngcontent-%COMP%]{border-radius:20px;background:linear-gradient(145deg,#fff,#f8f9fa);box-shadow:0 5px 20px #0000000d;padding:3rem;transition:all .4s cubic-bezier(.25,.46,.45,.94);position:relative;border:1px solid rgba(255,255,255,.8);overflow:hidden}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#27ae60,#4bd786);border-radius:20px 20px 0 0}.card[_ngcontent-%COMP%]:hover{box-shadow:0 15px 35px #00000026;transform:translateY(-6px)}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:800;margin-bottom:.5rem;font-size:2.4rem;background:linear-gradient(135deg,#2c3e50,#3e5871);-webkit-background-clip:text;background-clip:text;color:transparent;position:relative}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:0;width:60px;height:4px;background:linear-gradient(90deg,#27ae60,#75e0a2);border-radius:2px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#7f8c8d;font-size:1.05rem;margin-bottom:2rem;line-height:1.6}.card[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:15px;font-weight:600;background:linear-gradient(135deg,#eafaf1,#fff);color:#219150;text-align:center;padding:1rem 1.5rem;margin-bottom:2rem;box-shadow:0 4px 15px #27ae6026;border:2px solid rgba(39,174,96,.1);position:relative}.card[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]:before{content:"\\1f4a1";position:absolute;left:1.2rem;top:50%;transform:translateY(-50%);font-size:1.2rem}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#1e8449);border:none;border-radius:12px;font-weight:600;padding:.875rem 2rem;font-size:1.05rem;transition:all .4s cubic-bezier(.25,.46,.45,.94);position:relative;overflow:hidden}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .6s}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #27ae6066}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:hover:before{left:100%}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]{background:linear-gradient(145deg,#f9fdfb,#fff);border-radius:15px;padding:2rem;box-shadow:0 5px 20px #0000000d;border:1px solid rgba(0,0,0,.05)}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:12px;border:2px solid #e9ecef;padding:.875rem 1.2rem;font-size:1rem;transition:all .4s cubic-bezier(.25,.46,.45,.94);background:#fff}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#27ae60;box-shadow:0 0 0 3px #27ae601a;transform:translateY(-2px)}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#adb5bd}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae60,#1e8449);border:none;border-radius:12px;padding:1rem 2rem;font-weight:600;font-size:1.05rem;transition:all .4s cubic-bezier(.25,.46,.45,.94)}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #27ae604d}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1.8rem;margin-top:2rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#fff,#fafafa);border-radius:18px;padding:2rem;display:flex;flex-direction:column;justify-content:space-between;transition:all .4s cubic-bezier(.25,.46,.45,.94);border:1px solid rgba(0,0,0,.05);box-shadow:0 5px 20px #0000000d;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_cardEntrance .6s ease-out forwards}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(7){animation-delay:.7s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(8){animation-delay:.8s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(9){animation-delay:.9s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:nth-child(10){animation-delay:1s}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#fff,#fff);box-shadow:0 15px 35px #00000026;transform:translateY(-8px) scale(1.02)}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]:hover   .user-icon[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg);background:linear-gradient(135deg,#27ae60,#1e8449);color:#fff}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1.2rem;margin-bottom:1.5rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{font-size:2.3rem;color:#27ae60;background:linear-gradient(135deg,#eafaf1,#fff);border-radius:50%;padding:.8rem;box-shadow:0 4px 15px #27ae6033;width:70px;height:70px;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.25,.46,.45,.94)}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]{flex:1}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.25rem;color:#2c3e50;font-weight:700;display:block;margin-bottom:.5rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem;color:#7f8c8d;margin:.2rem 0}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]   .phone-active[_ngcontent-%COMP%]{color:#27ae60;font-weight:600;display:flex;align-items:center;gap:.4rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]   .phone-inactive[_ngcontent-%COMP%]{color:#95a5a6;font-style:italic;display:flex;align-items:center;gap:.4rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.8rem;margin-top:auto;padding-top:1.5rem;border-top:1px solid rgba(0,0,0,.08)}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.9rem;padding:.6rem 1.2rem;border-radius:10px;font-weight:600;border:none;transition:all .4s cubic-bezier(.25,.46,.45,.94)}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffc107,#e0a800);color:#000}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 15px #ffc1074d}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]{background:linear-gradient(135deg,#dc3545,#c82333);color:#fff}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]   button.btn-danger[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 15px #dc35454d}@keyframes _ngcontent-%COMP%_cardEntrance{0%{opacity:0;transform:translateY(25px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.card[_ngcontent-%COMP%]   .text-center.text-muted[_ngcontent-%COMP%]{padding:3rem 1rem;font-size:1.1rem;color:#95a5a6}.card[_ngcontent-%COMP%]   .text-center.text-muted[_ngcontent-%COMP%]:before{content:"\\1f465";font-size:3rem;display:block;margin-bottom:1rem;opacity:.5}@media (max-width: 768px){.card[_ngcontent-%COMP%]{padding:2.5rem 2rem}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.card[_ngcontent-%COMP%]   .merchant-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.card[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]{padding:1.8rem}.card[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.card[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-info[_ngcontent-%COMP%]   .user-icon[_ngcontent-%COMP%]{align-self:center}.card[_ngcontent-%COMP%]   .merchant-card[_ngcontent-%COMP%]   .merchant-actions[_ngcontent-%COMP%]{justify-content:center;flex-wrap:wrap}.card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]{padding:1.5rem}}@media (max-width: 480px){.card[_ngcontent-%COMP%]{padding:2rem 1.2rem}.card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.card[_ngcontent-%COMP%]   .btn-success[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .form-add-merchant[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%}}']})};export{A as MerchantListComponent};
