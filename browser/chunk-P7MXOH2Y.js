import{d as j,g as Y}from"./chunk-BTAZEGTB.js";import{a as H}from"./chunk-RTPLDOJU.js";import{A as u,Aa as w,Ga as v,La as f,S as O,Sb as D,Tb as E,Vb as F,W as P,Wa as d,Wb as z,Xa as a,Ya as i,Za as s,bc as T,cb as h,ib as l,jb as r,kb as g,lb as y,p as C,qb as p,rb as k,tb as x,ub as m,va as o,vb as I,wb as S,xb as _,zb as M}from"./chunk-W5R6ALBK.js";var b=class t{constructor(n){this.http=n}apiUrl=`${H.apiUrl}/reports`;getDashboardStats(){return this.http.get(`${this.apiUrl}/dashboard-stats`).pipe(u(n=>(console.error("Error al obtener las estad\xEDsticas del dashboard:",n),C(()=>new Error("No se pudieron cargar las estad\xEDsticas.")))))}static \u0275fac=function(e){return new(e||t)(P(T))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})};var $=t=>({icon:"bi-people-fill",title:"Comerciantes",value:t,color:"primary",desc:"Registrados"}),G=t=>({icon:"bi-cash-coin",title:"Movimientos",value:t,color:"success",desc:"Hoy registrados"}),L=t=>({icon:"bi-wallet2",title:"Ingresos Hoy",value:t,color:"info",desc:"Total del d\xEDa"}),B=t=>({icon:"bi-calendar2-check",title:"Ingresos Mes",value:t,color:"warning",desc:"Total mensual"}),q=(t,n,e,c)=>[t,n,e,c],A=()=>({icon:"bi-person-lines-fill",title:"Comerciantes",desc:"Gestiona los comerciantes registrados.",color:"primary",route:"/merchants"}),J=()=>({icon:"bi-truck",title:"Movimientos",desc:"Registra nuevos ingresos o salidas.",color:"success",route:"/movements"}),K=(t,n)=>[t,n];function Q(t,n){t&1&&(a(0,"div",9),s(1,"div",10),a(2,"p",11),r(3,"Cargando estad\xEDsticas del sistema..."),i()())}function V(t,n){if(t&1&&(a(0,"div",14)(1,"div")(2,"div",15)(3,"div",16)(4,"div")(5,"h6",17),r(6),i(),a(7,"h2",18),r(8),i(),a(9,"small",19),r(10),i()(),a(11,"div",20),s(12,"i"),i()()()()()),t&2){let e=n.$implicit;o(),l(p("stat-card card border-0 shadow-sm text-white bg-",e.color," position-relative overflow-hidden")),o(5),g(e.title),o(2),g(e.value),o(2),g(e.desc),o(2),l(p("bi ",e.icon," fs-3"))}}function W(t,n){if(t&1&&(a(0,"div",12),f(1,V,13,9,"div",13),_(2,"number"),_(3,"number"),i()),t&2){let e=h();o(),d("ngForOf",S(15,q,m(7,$,e.stats.totalMerchants),m(9,G,e.stats.totalMovements),m(11,L,"S/ "+M(2,1,e.stats.todayIncome,"1.2-2")),m(13,B,"S/ "+M(3,4,e.stats.monthlyIncome,"1.2-2"))))}}function X(t,n){if(t&1&&(a(0,"div",23)(1,"div",24)(2,"div",25)(3,"div"),s(4,"i"),i(),a(5,"h5",26),r(6),i(),a(7,"p",27),r(8),i(),a(9,"a",28),r(10," Ir "),s(11,"i",29),i()()()()),t&2){let e=n.$implicit;o(3),l(k("icon-wrapper mb-3 bg-",e.color," bg-opacity-10 text-",e.color)),o(),l(p("bi ",e.icon," fs-1")),o(2),g(e.title),o(2),g(e.desc),o(),l(p("btn btn-outline-",e.color," px-4")),d("routerLink",e.route)}}function Z(t,n){t&1&&(a(0,"div",21),f(1,X,12,13,"div",22),i()),t&2&&(o(),d("ngForOf",I(3,K,x(1,A),x(2,J))))}function tt(t,n){if(t&1&&(a(0,"div",30),s(1,"i",31),r(2),i()),t&2){let e=h();o(2),y(" ",e.errorMessage," ")}}var N=class t{constructor(n){this.dashboardService=n}stats={totalMerchants:0,totalMovements:0,todayIncome:0,monthlyIncome:0};loading=!0;errorMessage="";ngOnInit(){this.loadDashboardStats()}loadDashboardStats(){this.loading=!0,this.errorMessage="",this.dashboardService.getDashboardStats().subscribe({next:n=>{this.stats=n,this.loading=!1},error:n=>{this.errorMessage="\u274C Error al cargar las estad\xEDsticas del sistema.",this.loading=!1,console.error("Dashboard error:",n)}})}static \u0275fac=function(e){return new(e||t)(w(b))};static \u0275cmp=v({type:t,selectors:[["app-dashboard"]],decls:11,vars:4,consts:[[1,"dashboard-container","container","py-5"],[1,"text-center","mb-5"],[1,"fw-bold","text-gradient"],[1,"bi","bi-bar-chart-line","me-2"],[1,"text-muted"],["class","text-center",4,"ngIf"],["class","row g-4 fade-in",4,"ngIf"],["class","row mt-5 g-4 fade-in",4,"ngIf"],["class","alert alert-danger mt-4 text-center",4,"ngIf"],[1,"text-center"],["role","status",1,"spinner-border","text-primary",2,"width","3rem","height","3rem"],[1,"mt-3","text-secondary"],[1,"row","g-4","fade-in"],["class","col-md-3 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-6"],[1,"card-body","p-4"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-uppercase","text-white-50","mb-1"],[1,"fw-bold","mb-0"],[1,"text-white-50"],[1,"icon-circle","p-3","rounded-circle","bg-white","bg-opacity-25"],[1,"row","mt-5","g-4","fade-in"],["class","col-md-4 col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-6"],[1,"action-card","card","border-0","shadow-sm","text-center","h-100","hover-card"],[1,"card-body"],[1,"fw-bold","mb-2"],[1,"text-muted","small","mb-4"],[3,"routerLink"],[1,"bi","bi-arrow-right","ms-2"],[1,"alert","alert-danger","mt-4","text-center"],[1,"bi","bi-exclamation-triangle","me-2"]],template:function(e,c){e&1&&(a(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"i",3),r(4," Dashboard de IscoConga "),i(),a(5,"p",4),r(6,"Resumen general de las operaciones y actividades del sistema"),i()(),f(7,Q,4,0,"div",5)(8,W,4,20,"div",6)(9,Z,2,6,"div",7)(10,tt,3,1,"div",8),i()),e&2&&(o(7),d("ngIf",c.loading),o(),d("ngIf",!c.loading&&!c.errorMessage),o(),d("ngIf",!c.loading&&!c.errorMessage),o(),d("ngIf",c.errorMessage))},dependencies:[z,D,E,Y,j,F],styles:['@charset "UTF-8";.dashboard-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-out;min-height:100vh;background:linear-gradient(135deg,#f8f9fa,#eef2f6,#f8f9fa);padding-bottom:4rem;font-family:Poppins,sans-serif;position:relative;overflow-x:hidden}.dashboard-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 80%,rgba(0,123,255,.03) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(40,167,69,.03) 0%,transparent 50%),radial-gradient(circle at 40% 40%,rgba(253,126,20,.02) 0%,transparent 50%);pointer-events:none}.text-gradient[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#6610f2,#007bff);background-size:200% 200%;-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 4px 12px rgba(0,0,0,.15);letter-spacing:.8px;animation:_ngcontent-%COMP%_gradientShift 3s ease-in-out infinite;position:relative;display:inline-block}.text-gradient[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:50%;transform:translate(-50%);width:120px;height:3px;background:linear-gradient(90deg,#007bff,#6610f2);border-radius:2px;opacity:.8}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.stat-card[_ngcontent-%COMP%]{border-radius:1.5rem;color:#fff;transition:all .5s cubic-bezier(.25,.46,.45,.94);overflow:hidden;position:relative;padding:2rem 1.5rem;box-shadow:0 12px 35px #00000026,inset 0 1px #fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1)}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .6s ease}.stat-card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,rgba(255,255,255,.15),transparent 70%);transform:rotate(25deg);transition:opacity .6s ease;opacity:0}.stat-card-1[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#6610f2);box-shadow:0 12px 35px #007bff40}.stat-card-2[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);box-shadow:0 12px 35px #28a74540}.stat-card-3[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fd7e14,#dc3545);box-shadow:0 12px 35px #fd7e1440}.stat-card-4[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6f42c1,#e83e8c);box-shadow:0 12px 35px #6f42c140}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.02);box-shadow:0 25px 60px #00000040,inset 0 1px #ffffff4d}.stat-card[_ngcontent-%COMP%]:hover:before{left:100%}.stat-card[_ngcontent-%COMP%]:hover:after{opacity:1}.stat-card[_ngcontent-%COMP%]:hover   .icon-circle[_ngcontent-%COMP%]{transform:rotate(15deg) scale(1.15);background:#fff6;box-shadow:0 8px 25px #ffffff4d,inset 0 2px 4px #fff3}.icon-circle[_ngcontent-%COMP%]{transition:all .5s cubic-bezier(.25,.46,.45,.94);background:#ffffff40;box-shadow:inset 0 4px 12px #fff3,0 4px 15px #0000001a;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.3)}.icon-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.row.mt-5.g-4[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:stretch;flex-wrap:wrap;gap:2.5rem!important}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]{display:flex;justify-content:center;flex:0 0 auto}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(1):nth-last-child(2), .row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(2):nth-last-child(1){max-width:420px;width:100%}@media (max-width: 768px){.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(1):nth-last-child(2), .row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(2):nth-last-child(1){max-width:100%;flex:0 0 100%}}.action-card[_ngcontent-%COMP%]{border-radius:1.8rem;transition:all .6s cubic-bezier(.175,.885,.32,1.275);background:linear-gradient(135deg,#fff,#f8f9fa);overflow:hidden;border:1px solid rgba(255,255,255,.8);height:100%;position:relative;width:100%;max-width:420px;margin:0 auto;box-shadow:0 15px 40px #0000001a,inset 0 1px #fffc}.action-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.6),transparent);transition:left .8s ease}.action-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:3rem 2rem;display:flex;flex-direction:column;align-items:center;text-align:center;z-index:2;position:relative;height:100%;background:inherit}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 2rem;transition:all .6s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden;box-shadow:0 15px 35px #00000026,inset 0 4px 12px #ffffff4d}.action-card[_ngcontent-%COMP%]   .icon-wrapper.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#6610f2);box-shadow:0 15px 35px #007bff66}.action-card[_ngcontent-%COMP%]   .icon-wrapper.bg-success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#28a745,#20c997);box-shadow:0 15px 35px #28a74566}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.8rem;color:#fff;transition:all .4s ease;filter:drop-shadow(0 2px 8px rgba(0,0,0,.3))}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.6),transparent);transform:rotate(45deg);transition:all .8s ease;opacity:0}.action-card[_ngcontent-%COMP%]:hover{transform:translateY(-12px) scale(1.03);box-shadow:0 30px 60px #0003,inset 0 1px #ffffffe6}.action-card[_ngcontent-%COMP%]:hover:before{left:100%}.action-card[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]{transform:scale(1.2) rotate(8deg)}.action-card[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.15);filter:drop-shadow(0 4px 12px rgba(0,0,0,.4))}.action-card[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]:before{opacity:1;animation:shine 2s ease-in-out}.action-card[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{transform:translateY(-3px);box-shadow:0 8px 25px #0000004d}.action-card[_ngcontent-%COMP%]:hover:after{opacity:1}.action-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:1.8rem;padding:3px;background:linear-gradient(135deg,#007bff,#28a745,#6610f2,#20c997);background-size:300% 300%;mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);mask-composite:exclude;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);-webkit-mask-composite:xor;opacity:0;transition:all .5s ease;animation:_ngcontent-%COMP%_borderGlow 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_borderGlow{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.action-card[_ngcontent-%COMP%]:hover:after{opacity:1;animation-duration:1.5s}.action-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#1a1a1a;font-weight:800;margin-bottom:1rem;font-size:1.4rem;background:linear-gradient(135deg,#2d3748,#4a5568);-webkit-background-clip:text;background-clip:text;color:transparent;letter-spacing:.5px}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#718096;line-height:1.7;margin-bottom:2rem;flex-grow:1;font-size:1rem;font-weight:400}.action-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:50px;padding:.75rem 2rem;font-weight:700;transition:all .4s cubic-bezier(.175,.885,.32,1.275);border-width:2px;letter-spacing:.5px;position:relative;overflow:hidden}.action-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.4),transparent);transition:left .6s}.action-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:before{left:100%}.action-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 10px 25px #00000040}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(30px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s ease-out}@media (max-width: 1200px){.row.mt-5.g-4[_ngcontent-%COMP%]{gap:2rem!important}.action-card[_ngcontent-%COMP%]{max-width:380px}}@media (max-width: 992px){.dashboard-container[_ngcontent-%COMP%]{padding-bottom:3rem}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]{max-width:380px}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(1):nth-last-child(2), .row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(2):nth-last-child(1){max-width:380px}.action-card[_ngcontent-%COMP%]{max-width:380px}}@media (max-width: 768px){.stat-card[_ngcontent-%COMP%], .action-card[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{padding:1.75rem 1.25rem}.stat-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.action-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2.5rem 1.5rem}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:100px;height:100px}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.4rem}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(1):nth-last-child(2), .row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(2):nth-last-child(1){max-width:100%}.action-card[_ngcontent-%COMP%]{max-width:100%;margin:0 1.5rem}}@media (max-width: 576px){.dashboard-container[_ngcontent-%COMP%]{padding:2rem 0 3rem}.row.mt-5.g-4[_ngcontent-%COMP%]{gap:1.5rem!important}.action-card[_ngcontent-%COMP%]{margin:0 1rem;border-radius:1.5rem}.action-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:2rem 1.25rem}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:90px;height:90px}.action-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.2rem}}@media (min-width: 769px){.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(1){animation:fadeIn .8s ease-out .1s both}.row.mt-5.g-4[_ngcontent-%COMP%]   .col-md-4.col-sm-6[_ngcontent-%COMP%]:nth-child(2){animation:fadeIn .8s ease-out .2s both}.action-card[_ngcontent-%COMP%]:hover ~ .action-card[_ngcontent-%COMP%]{opacity:.7;transform:translateY(-6px) scale(.98)}}.text-center[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{border-width:4px;animation:_ngcontent-%COMP%_pulse 2s infinite,spin 1s linear infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 0 #007bff66}70%{box-shadow:0 0 0 15px #007bff00}}']})};export{N as DashboardComponent};
